<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>YouTube Channel MP3 Downloader</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 20px;
      margin: 0;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    form {
      max-width: 600px;
      margin: 0 auto 30px;
      display: flex;
      gap: 10px;
    }

    input[type="text"] {
      flex: 1;
      padding: 10px;
      font-size: 16px;
    }

    button {
      padding: 10px 20px;
      background: #28a745;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background: #218838;
    }

    .error {
      text-align: center;
      color: red;
      margin-bottom: 20px;
    }

    .videos {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .card {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 280px;
    }

    .thumbnail img {
      width: 100%;
      border-radius: 8px;
    }

    .title {
      font-size: 16px;
      font-weight: bold;
      margin: 10px 0;
      color: #333;
    }

    .btn {
      display: inline-block;
      padding: 8px 12px;
      margin-right: 10px;
      margin-top: 5px;
      text-decoration: none;
      color: #fff;
      background: #007bff;
      border-radius: 5px;
      font-size: 14px;
    }

    .btn-video {
      background: #dc3545;
    }
  </style>
</head>
<body>

<h1>üéµ YouTube Channel MP3 Downloader</h1>

<form id="searchForm">
  <input type="text" id="channelId" placeholder="Masukkan Channel ID YouTube" required>
  <button type="submit">Cari</button>
</form>

<div class="error" id="errorBox"></div>
<div class="videos" id="videoContainer"></div>

<footer style="text-align:center; margin-top:40px;">
  <p>¬© 2025 by Saipul Anuar ‚Ä¢ Powered by YouTube RSS & API</p>
</footer>

<script>
  const form = document.getElementById('searchForm');
  const errorBox = document.getElementById('errorBox');
  const container = document.getElementById('videoContainer');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const channelId = document.getElementById('channelId').value.trim();
    if (!channelId) return;

    errorBox.textContent = '';
    container.innerHTML = '<p>üîÑ Memuat video...</p>';

    const rssUrl = `https://www.youtube.com/feeds/videos.xml?channel_id=${channelId}`;
    const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

    try {
      const res = await fetch(apiUrl);
      const data = await res.json();

      if (!data.items || data.items.length === 0) {
        throw new Error('Tidak ada video ditemukan.');
      }

      container.innerHTML = '';
      let counter = 0;

      for (let item of data.items) {
        if (counter >= 20) break;
        if (item.link.includes('/shorts/')) continue;

        const videoId = item.link.split('=')[1];
        const title = item.title;
        const thumbnail = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;

        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumbnail">
            <img src="${thumbnail}" alt="Thumbnail">
          </div>
          <div class="title">${title}</div>
          <a class="btn" href="https://api.saipulanuar.eu.org/api/ytdl?url=https://www.youtube.com/watch?v=${videoId}&type=mp3" target="_blank">Download MP3</a>
          <a class="btn btn-video" href="https://api.saipulanuar.eu.org/api/ytdl?url=https://www.youtube.com/watch?v=${videoId}&type=mp4" target="_blank">Download Video</a>
        `;
        container.appendChild(card);
        counter++;
      }
    } catch (err) {
      console.error(err);
      errorBox.textContent = '‚ùå Gagal mengambil video dari channel. Pastikan channel_id benar.';
      container.innerHTML = '';
    }
  });
</script>

</body>
</html>
